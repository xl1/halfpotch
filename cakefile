{ spawn } = require 'child_process'
which = require('which').sync

launch = (command, options, callback) ->
  st = spawn(which(command), options, customFds:[0..2])
  st.on 'exit', (stat) -> stat or callback?()

task 'build', ->
  launch 'coffee', ['-cj', 'resource/mosaicmaker.js',
    'resource/core.coffee',
    'resource/constants.coffee',
    'resource/mosaicmaker.coffee']